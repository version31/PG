!function(){var j={},i=function(a){for(var v=j[a],u=v.deps,t=v.defn,s=u.length,r=new Array(s),q=0;q<s;++q){r[q]=o(u[q])}var d=t.apply(null,r);if(void 0===d){throw"module ["+a+"] returned undefined"}v.instance=d},p=function(a,f,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===f){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}j[a]={deps:f,defn:e,instance:void 0}},o=function(b){var a=j[b];if(void 0===a){throw"module ["+b+"] was undefined"}return void 0===a.instance&&i(b),a.instance},n=function(g,d){for(var r=g.length,q=new Array(r),h=0;h<r;++h){q.push(o(g[h]))}d.apply(null,d)},m={};m.bolt={module:{api:{define:p,require:n,demand:o}}};var l=p,k=function(d,c){l(d,[],function(){return c})};k("3",tinymce.util.Tools.resolve),l("1",["3"],function(b){return b("tinymce.Env")}),l("2",["3"],function(b){return b("tinymce.PluginManager")}),l("0",["1","2"],function(d,c){return c.add("anchor",function(a){var r=function(b){return !b.attr("href")&&(b.attr("id")||b.attr("name"))&&!b.firstChild},q=function(b){return function(e){for(var f=0;f<e.length;f++){r(e[f])&&e[f].attr("contenteditable",b)}}},h=function(b){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(b)},g=function(){var b=a.selection.getNode(),f="A"==b.tagName&&""===a.dom.getAttrib(b,"href"),e="";f&&(e=b.id||b.name||""),a.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:e},onsubmit:function(t){var s=t.data.id;return h(s)?void (f?(b.removeAttribute("name"),b.id=s):(a.selection.collapse(!0),a.execCommand("mceInsertContent",!1,a.dom.createHTML("a",{id:s})))):(t.preventDefault(),void a.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."))}})};d.ceFalse&&a.on("PreInit",function(){a.parser.addNodeFilter("a",q("false")),a.serializer.addNodeFilter("a",q(null))}),a.addCommand("mceAnchor",g),a.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:g,stateSelector:"a:not([href])"}),a.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:g})}),function(){}}),o("0")()}();