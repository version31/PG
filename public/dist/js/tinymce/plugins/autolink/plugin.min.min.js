!function(){var j={},i=function(a){for(var v=j[a],u=v.deps,t=v.defn,s=u.length,r=new Array(s),q=0;q<s;++q){r[q]=o(u[q])}var d=t.apply(null,r);if(void 0===d){throw"module ["+a+"] returned undefined"}v.instance=d},p=function(a,f,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===f){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}j[a]={deps:f,defn:e,instance:void 0}},o=function(b){var a=j[b];if(void 0===a){throw"module ["+b+"] was undefined"}return void 0===a.instance&&i(b),a.instance},n=function(g,d){for(var r=g.length,q=new Array(r),h=0;h<r;++h){q.push(o(g[h]))}d.apply(null,d)},m={};m.bolt={module:{api:{define:p,require:n,demand:o}}};var l=p,k=function(d,c){l(d,[],function(){return c})};k("3",tinymce.util.Tools.resolve),l("1",["3"],function(b){return b("tinymce.Env")}),l("2",["3"],function(b){return b("tinymce.PluginManager")}),l("0",["1","2"],function(d,c){return c.add("autolink",function(a){function v(b){s(b,-1,"(",!0)}function u(b){s(b,0,"",!0)}function t(b){s(b,-1,"",!1)}function s(K,J,I){function H(f,e){if(e<0&&(e=0),3==f.nodeType){var g=f.data.length;e>g&&(e=g)}return e}function G(f,e){1!=f.nodeType||f.hasChildNodes()?E.setStart(f,H(f,e)):E.setStartBefore(f)}function F(f,e){1!=f.nodeType||f.hasChildNodes()?E.setEnd(f,H(f,e)):E.setEndAfter(f)}var E,D,C,B,A,z,y,x,w,h;if("A"!=K.selection.getNode().tagName){if(E=K.selection.getRng(!0).cloneRange(),E.startOffset<5){if(x=E.endContainer.previousSibling,!x){if(!E.endContainer.firstChild||!E.endContainer.firstChild.nextSibling){return}x=E.endContainer.firstChild.nextSibling}if(w=x.length,G(x,w),F(x,w),E.endOffset<5){return}D=E.endOffset,B=x}else{if(B=E.endContainer,3!=B.nodeType&&B.firstChild){for(;3!=B.nodeType&&B.firstChild;){B=B.firstChild}3==B.nodeType&&(G(B,0),F(B,B.nodeValue.length))}D=1==E.endOffset?2:E.endOffset-1-J}C=D;do{G(B,D>=2?D-2:0),F(B,D>=1?D-1:0),D-=1,h=E.toString()}while(" "!=h&&""!==h&&160!=h.charCodeAt(0)&&D-2>=0&&h!=I);E.toString()==I||160==E.toString().charCodeAt(0)?(G(B,D),F(B,C),D+=1):0===E.startOffset?(G(B,0),F(B,C)):(G(B,D),F(B,C)),z=E.toString(),"."==z.charAt(z.length-1)&&F(B,C-1),z=E.toString(),y=z.match(q),y&&("www."==y[1]?y[1]="http://www.":/@$/.test(y[1])&&!/^mailto:/.test(y[1])&&(y[1]="mailto:"+y[1]),A=K.selection.getBookmark(),K.selection.setRng(E),K.execCommand("createlink",!1,y[1]+y[2]),K.settings.default_link_target&&K.dom.setAttrib(K.selection.getNode(),"target",K.settings.default_link_target),K.selection.moveToBookmark(A),K.nodeChanged())}}var r,q=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;return a.settings.autolink_pattern&&(q=a.settings.autolink_pattern),a.on("keydown",function(b){if(13==b.keyCode){return t(a)}}),d.ie?void a.on("focus",function(){if(!r){r=!0;try{a.execCommand("AutoUrlDetect",!1,!0)}catch(b){}}}):(a.on("keypress",function(b){if(41==b.keyCode){return v(a)}}),void a.on("keyup",function(b){if(32==b.keyCode){return u(a)}}))}),function(){}}),o("0")()}();