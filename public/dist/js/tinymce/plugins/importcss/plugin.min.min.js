!function(){var j={},i=function(a){for(var v=j[a],u=v.deps,t=v.defn,s=u.length,r=new Array(s),q=0;q<s;++q){r[q]=o(u[q])}var d=t.apply(null,r);if(void 0===d){throw"module ["+a+"] returned undefined"}v.instance=d},p=function(a,f,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===f){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}j[a]={deps:f,defn:e,instance:void 0}},o=function(b){var a=j[b];if(void 0===a){throw"module ["+b+"] was undefined"}return void 0===a.instance&&i(b),a.instance},n=function(g,d){for(var r=g.length,q=new Array(r),h=0;h<r;++h){q.push(o(g[h]))}d.apply(null,d)},m={};m.bolt={module:{api:{define:p,require:n,demand:o}}};var l=p,k=function(d,c){l(d,[],function(){return c})};k("6",tinymce.util.Tools.resolve),l("1",["6"],function(b){return b("tinymce.EditorManager")}),l("2",["6"],function(b){return b("tinymce.dom.DOMUtils")}),l("3",["6"],function(b){return b("tinymce.Env")}),l("4",["6"],function(b){return b("tinymce.PluginManager")}),l("5",["6"],function(b){return b("tinymce.util.Tools")}),l("0",["1","2","3","4","5"],function(g,f,r,q,h){return q.add("importcss",function(B){function A(C){var d=r.cacheSuffix;return"string"==typeof C&&(C=C.replace("?"+d,"").replace("&"+d,"")),C}function z(d){var E=B.settings,D=E.skin!==!1&&(E.skin||"lightgray");if(D){var C=E.skin_url;return C=C?B.documentBaseURI.toAbsolute(C):g.baseURL+"/skins/"+D,d===C+"/content"+(B.inline?".inline":"")+".min.css"}return !1}function y(d){return"string"==typeof d?function(C){return C.indexOf(d)!==-1}:d instanceof RegExp?function(C){return d.test(C)}:d}function x(C,d){function F(G,J){var I,H=G.href;if(H=A(H),H&&d(H,J)&&!z(H)){a(G.imports,function(K){F(K,!0)});try{I=G.cssRules||G.rules}catch(G){}a(I,function(K){K.styleSheet?F(K.styleSheet,!0):K.selectorText&&a(K.selectorText.split(","),function(L){E.push(h.trim(L))})})}}var E=[],D={};a(B.contentCSS,function(G){D[G]=!0}),d||(d=function(H,G){return G||D[H]});try{a(C.styleSheets,function(G){F(G)})}catch(C){}return E}function w(C){var d,G=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(C);if(G){var F=G[1],E=G[2].substr(1).split(".").join(" "),D=h.makeMap("a,img");return G[1]?(d={title:C},B.schema.getTextBlockElements()[F]?d.block=F:B.schema.getBlockElements()[F]||D[F.toLowerCase()]?d.selector=F:d.inline=F):G[2]&&(d={inline:"span",title:C.substr(1),classes:E}),B.settings.importcss_merge_classes!==!1?d.classes=E:d.attributes={"class":E},d}}function v(C,d){return h.grep(C,function(D){return !D.filter||D.filter(d)})}function u(d){return h.map(d,function(C){return h.extend({},C,{original:C,selectors:{},filter:y(C.filter),item:{text:C.title,menu:[]}})})}function t(C,d){return null===d||C.settings.importcss_exclusive!==!1}function s(C,d,D){return !(t(B,d)?C in D:C in d.selectors)}function e(C,d,D){t(B,d)?D[C]=!0:d.selectors[C]=!0}function c(C,d,F){var E,D=B.settings;return E=F&&F.selector_converter?F.selector_converter:D.importcss_selector_converter?D.importcss_selector_converter:w,E.call(C,d,F)}var b=this,a=h.each;B.on("renderFormatsMenu",function(C){var H=B.settings,G={},F=y(H.importcss_selector_filter),D=C.control,d=u(H.importcss_groups),E=function(I,L){if(s(I,L,G)){e(I,L,G);var K=c(b,I,L);if(K){var J=K.name||f.DOM.uniqueId();return B.formatter.register(J,K),h.extend({},D.settings.itemDefaults,{text:K.title,format:J})}}return null};B.settings.importcss_append||D.items().remove(),a(x(C.doc||B.getDoc(),y(H.importcss_file_filter)),function(J){if(J.indexOf(".mce-")===-1&&(!F||F(J))){var I=v(d,J);if(I.length>0){h.each(I,function(L){var M=E(J,L);M&&L.item.menu.push(M)})}else{var K=E(J,null);K&&D.add(K)}}}),a(d,function(I){I.item.menu.length>0&&D.add(I.item)}),C.control.renderNew()}),b.convertSelectorToFormat=w}),function(){}}),o("0")()}();