!function(){var j={},i=function(a){for(var v=j[a],u=v.deps,t=v.defn,s=u.length,r=new Array(s),q=0;q<s;++q){r[q]=o(u[q])}var d=t.apply(null,r);if(void 0===d){throw"module ["+a+"] returned undefined"}v.instance=d},p=function(a,f,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===f){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}j[a]={deps:f,defn:e,instance:void 0}},o=function(b){var a=j[b];if(void 0===a){throw"module ["+b+"] was undefined"}return void 0===a.instance&&i(b),a.instance},n=function(g,d){for(var r=g.length,q=new Array(r),h=0;h<r;++h){q.push(o(g[h]))}d.apply(null,d)},m={};m.bolt={module:{api:{define:p,require:n,demand:o}}};var l=p,k=function(d,c){l(d,[],function(){return c})};k("4",tinymce.util.Tools.resolve),l("1",["4"],function(b){return b("tinymce.PluginManager")}),l("5",["4"],function(b){return b("tinymce.util.VK")}),l("a",["4"],function(b){return b("tinymce.util.Delay")}),l("b",["4"],function(b){return b("tinymce.util.Tools")}),l("c",["4"],function(b){return b("tinymce.util.XHR")}),l("9",[],function(){var D=function(b){return"boolean"==typeof b.link_assume_external_targets&&b.link_assume_external_targets},C=function(b){return"boolean"==typeof b.link_context_toolbar&&b.link_context_toolbar},B=function(b){return b.link_list},A=function(b){return"string"==typeof b.default_link_target},z=function(b){return b.default_link_target},y=function(b){return b.target_list},x=function(d,c){d.settings.target_list=c},w=function(b){return y(b)!==!1},v=function(b){return b.rel_list},u=function(b){return void 0!==v(b)},t=function(b){return b.link_class_list},s=function(b){return void 0!==t(b)},r=function(b){return b.link_title!==!1},q=function(b){return"boolean"==typeof b.allow_unsafe_link_target&&b.allow_unsafe_link_target};return{assumeExternalTargets:D,hasContextToolbar:C,getLinkList:B,hasDefaultLinkTarget:A,getDefaultLinkTarget:z,getTargetList:y,setTargetList:x,shouldShowTargetList:w,getRelList:v,hasRelList:u,getLinkClassList:t,hasLinkClassList:s,shouldShowLinkTitle:r,allowUnsafeLinkTarget:q}}),k("d",RegExp),l("8",["b","9","d"],function(E,D,C){var B=function(a,G){var F="noopener noreferrer",h=function(b){return b=c(b),b?[b,F].join(" "):F},c=function(e){var f=new C("("+F.replace(" ","|")+")","g");return e&&(e=E.trim(e.replace(f,""))),e?e:null};return G?h(a):c(a)},A=function(b){return b.replace(/\uFEFF/g,"")},z=function(d,c){return c=c||d.selection.getStart(),u(c)?d.dom.select("a[href]",c)[0]:d.dom.getParent(c,"a[href]")},y=function(e,d){var f=d?d.innerText||d.textContent:e.getContent({format:"text"});return A(f)},x=function(b){return b&&"A"===b.nodeName&&b.href},w=function(a){return E.grep(a,x).length>0},v=function(b){return !(/</.test(b)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(b)||b.indexOf("href=")==-1))},u=function(b){return b&&"FIGURE"===b.nodeName&&/\bimage\b/i.test(b.className)},t=function(b,d){return function(a){b.undoManager.transact(function(){var f=b.selection.getNode(),e=z(b,f),c={href:a.href,target:a.target?a.target:null,rel:a.rel?a.rel:null,"class":a["class"]?a["class"]:null,title:a.title?a.title:null};D.allowUnsafeLinkTarget(b.settings)===!1&&(c.rel=B(c.rel,"_blank"==c.target)),a.href===d.href&&(d.attach(),d={}),e?(b.focus(),a.hasOwnProperty("text")&&("innerText" in e?e.innerText=a.text:e.textContent=a.text),b.dom.setAttribs(e,c),b.selection.select(e),b.undoManager.add()):u(f)?q(b,f,c):a.hasOwnProperty("text")?b.insertContent(b.dom.createHTML("a",c,b.dom.encode(a.text))):b.execCommand("mceInsertLink",!1,c)})}},s=function(b){return function(){b.undoManager.transact(function(){var a=b.selection.getNode();u(a)?r(b,a):b.execCommand("unlink")})}},r=function(f,e){var h,g;g=f.dom.select("img",e)[0],g&&(h=f.dom.getParents(g,"a[href]",e)[0],h&&(h.parentNode.insertBefore(g,h),f.dom.remove(h)))},q=function(g,f,G){var F,h;h=g.dom.select("img",f)[0],h&&(F=g.dom.create("a",G),h.parentNode.insertBefore(F,h),F.appendChild(h))};return{link:t,unlink:s,isLink:x,hasLinks:w,isOnlyTextSelected:v,getAnchorElement:z,getAnchorText:y}}),l("6",["a","b","c","8","9"],function(A,z,y,x,w){var v={},u=function(e,c){var f=w.getLinkList(e.settings);"string"==typeof f?y.send({url:f,success:function(a){c(e,JSON.parse(a))}}):"function"==typeof f?f(function(a){c(e,a)}):c(e,f)},t=function(b,h,g){var f=function(c,e){return e=e||[],z.each(c,function(B){var d={text:B.text||B.title};B.menu?d.menu=f(B.menu):(d.value=B.value,h&&h(d)),e.push(d)}),e};return f(b,g||[])},s=function(a,h,g){var f=a.selection.getRng();A.setEditorTimeout(a,function(){a.windowManager.confirm(h,function(b){a.selection.setRng(f),g(b)})})},r=function(Q,P){var O,N,M,L,K,J,I,H,F,E,D,C={},B=Q.selection,h=Q.dom,f=function(g){var c=M.find("#text");(!c.value()||g.lastControl&&c.value()==g.lastControl.text())&&c.value(g.control.text()),M.find("#href").value(g.control.value())},e=function(g){var a=[];if(z.each(Q.dom.select("a:not([href])"),function(R){var c=R.name||R.id;c&&a.push({text:c,value:"#"+c,selected:g.indexOf("#"+c)!=-1})}),a.length){return a.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:a,onselect:f}}},d=function(){N||!L||C.text||this.parent().parent().find("#text")[0].value(this.value())},b=function(g){var a=g.meta||{};J&&J.value(Q.convertURL(this.value(),"href")),z.each(g.meta,function(S,R){var T=M.find("#"+R);"text"===R?0===N.length&&(T.value(S),C.text=S):T.value(S)}),a.attach&&(v={href:this.value(),attach:a.attach}),a.text||d.call(this)},G=function(c){c.meta=M.toJSON()};L=x.isOnlyTextSelected(B.getContent()),O=x.getAnchorElement(Q),C.text=N=x.getAnchorText(Q.selection,O),C.href=O?h.getAttrib(O,"href"):"",O?C.target=h.getAttrib(O,"target"):w.hasDefaultLinkTarget(Q.settings)&&(C.target=w.getDefaultLinkTarget(Q.settings)),(D=h.getAttrib(O,"rel"))&&(C.rel=D),(D=h.getAttrib(O,"class"))&&(C["class"]=D),(D=h.getAttrib(O,"title"))&&(C.title=D),L&&(K={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){C.text=this.value()}}),P&&(J={type:"listbox",label:"Link list",values:t(P,function(a){a.value=Q.convertURL(a.value||a.url,"href")},[{text:"None",value:""}]),onselect:f,value:Q.convertURL(C.href,"href"),onPostRender:function(){J=this}}),w.shouldShowTargetList(Q.settings)&&(void 0===w.getTargetList(Q.settings)&&w.setTargetList(Q,[{text:"None",value:""},{text:"New window",value:"_blank"}]),H={name:"target",type:"listbox",label:"Target",values:t(w.getTargetList(Q.settings))}),w.hasRelList(Q.settings)&&(I={name:"rel",type:"listbox",label:"Rel",values:t(w.getRelList(Q.settings))}),w.hasLinkClassList(Q.settings)&&(F={name:"class",type:"listbox",label:"Class",values:t(w.getLinkClassList(Q.settings),function(a){a.value&&(a.textStyle=function(){return Q.formatter.getCssText({inline:"a",classes:[a.value]})})})}),w.shouldShowLinkTitle(Q.settings)&&(E={name:"title",type:"textbox",label:"Title",value:C.title}),M=Q.windowManager.open({title:"Insert link",data:C,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:b,onkeyup:d,onbeforecall:G},K,E,e(C.href),J,I,H,F],onSubmit:function(V){var T=w.assumeExternalTargets(Q.settings),S=x.link(Q,v),R=x.unlink(Q),a=z.extend({},C,V.data),U=a.href;return U?(L&&a.text!==N||delete a.text,U.indexOf("@")>0&&U.indexOf("//")==-1&&U.indexOf("mailto:")==-1?void s(Q,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(c){c&&(a.href="mailto:"+U),S(a)}):T===!0&&!/^\w+:/i.test(U)||T===!1&&/^\s*www[\.|\d\.]/i.test(U)?void s(Q,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(c){c&&(a.href="http://"+U),S(a)}):void S(a)):void R()}})},q=function(b){u(b,r)};return{open:q}}),l("e",["4"],function(b){return b("tinymce.dom.DOMUtils")}),l("f",["4"],function(b){return b("tinymce.Env")}),l("7",["e","f"],function(f,e){var h=function(d,c){document.body.appendChild(d),d.dispatchEvent(c),document.body.removeChild(d)},g=function(r){if(!e.ie||e.ie>10){var q=document.createElement("a");q.target="_blank",q.href=r,q.rel="noreferrer noopener";var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),h(q,c)}else{var b=window.open("","_blank");if(b){b.opener=null;var a=b.document;a.open(),a.write('<meta http-equiv="refresh" content="0; url='+f.DOM.encode(r)+'">'),a.close()}}};return{open:g}}),l("2",["5","6","7","8","9"],function(H,G,F,E,D){var C=function(d,c){return d.dom.getParent(c,"a[href]")},B=function(b){return C(b,b.selection.getStart())},A=function(d){var c=d.getAttribute("data-mce-href");return c?c:d.getAttribute("href")},z=function(d){var c=d.plugins.contextmenu;return !!c&&c.isContextMenuVisible()},y=function(b){return b.altKey===!0&&b.shiftKey===!1&&b.ctrlKey===!1&&b.metaKey===!1},x=function(f,c){if(c){var h=A(c);if(/^#/.test(h)){var g=f.$(h);g.length&&f.selection.scrollIntoView(g[0],!0)}else{F.open(c.href)}}},w=function(b){return function(){G.open(b)}},v=function(b){return function(){x(b,B(b))}},u=function(b){return function(a){var h,e,d;return !!(D.hasContextToolbar(b.settings)&&!z(b)&&E.isLink(a)&&(h=b.selection,e=h.getRng(),d=e.startContainer,3==d.nodeType&&h.isCollapsed()&&e.startOffset>0&&e.startOffset<d.data.length))}},t=function(a){a.on("click",function(e){var b=C(a,e.target);b&&H.metaKeyPressed(e)&&(e.preventDefault(),x(a,b))}),a.on("keydown",function(b){var d=B(a);d&&13===b.keyCode&&y(b)&&(b.preventDefault(),x(a,d))})},s=function(b){return function(){var a=this;b.on("nodechange",function(d){a.active(!b.readonly&&!!E.getAnchorElement(b,d.element))})}},r=function(b){return function(){var a=this,d=function(c){E.hasLinks(c.parents)?a.show():a.hide()};E.hasLinks(b.dom.getParents(b.selection.getStart()))||a.hide(),b.on("nodechange",d),a.on("remove",function(){b.off("nodechange",d)})}};return{openDialog:w,gotoSelectedLink:v,leftClickedOnAHref:u,setupGotoLinks:t,toggleActiveState:s,toggleViewLinkState:r}}),l("3",["2","8"],function(g,f){var r=function(a){a.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:g.openDialog(a),onpostrender:g.toggleActiveState(a)}),a.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onclick:f.unlink(a),onpostrender:g.toggleActiveState(a)}),a.addContextToolbar&&a.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:g.gotoSelectedLink(a)})},q=function(a){a.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:g.gotoSelectedLink(a),onPostRender:g.toggleViewLinkState(a),prependToContext:!0}),a.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:g.openDialog(a),stateSelector:"a[href]",context:"insert",prependToContext:!0})},h=function(a){a.addContextToolbar&&a.addContextToolbar(g.leftClickedOnAHref(a),"openlink | link unlink")};return{setupButtons:r,setupMenuItems:q,setupContextToolbars:h}}),l("0",["1","2","3"],function(e,d,f){return e.add("link",function(b){f.setupButtons(b),f.setupMenuItems(b),f.setupContextToolbars(b),d.setupGotoLinks(b),b.addShortcut("Meta+K","",d.openDialog(b)),b.addCommand("mceLink",d.openDialog(b))}),function(){}}),o("0")()}();