!function(){var j={},i=function(a){for(var v=j[a],u=v.deps,t=v.defn,s=u.length,r=new Array(s),q=0;q<s;++q){r[q]=o(u[q])}var d=t.apply(null,r);if(void 0===d){throw"module ["+a+"] returned undefined"}v.instance=d},p=function(a,f,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===f){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}j[a]={deps:f,defn:e,instance:void 0}},o=function(b){var a=j[b];if(void 0===a){throw"module ["+b+"] was undefined"}return void 0===a.instance&&i(b),a.instance},n=function(g,d){for(var r=g.length,q=new Array(r),h=0;h<r;++h){q.push(o(g[h]))}d.apply(null,d)},m={};m.bolt={module:{api:{define:p,require:n,demand:o}}};var l=p,k=function(d,c){l(d,[],function(){return c})};k("3",tinymce.util.Tools.resolve),l("1",["3"],function(b){return b("tinymce.PluginManager")}),l("2",["3"],function(b){return b("tinymce.Env")}),l("0",["1","2"],function(d,c){return d.add("pagebreak",function(b){var r="mce-pagebreak",q=b.getParam("pagebreak_separator","<!-- pagebreak -->"),h=new RegExp(q.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),g='<img src="'+c.transparentSrc+'" class="'+r+'" data-mce-resize="false" data-mce-placeholder />';b.addCommand("mcePageBreak",function(){b.settings.pagebreak_split_block?b.insertContent("<p>"+g+"</p>"):b.insertContent(g)}),b.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),b.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),b.on("ResolveName",function(a){"IMG"==a.target.nodeName&&b.dom.hasClass(a.target,r)&&(a.name="pagebreak")}),b.on("click",function(a){a=a.target,"IMG"===a.nodeName&&b.dom.hasClass(a,r)&&b.selection.select(a)}),b.on("BeforeSetContent",function(e){e.content=e.content.replace(h,g)}),b.on("PreInit",function(){b.serializer.addNodeFilter("img",function(a){for(var v,u,t=a.length;t--;){if(v=a[t],u=v.attr("class"),u&&u.indexOf("mce-pagebreak")!==-1){var s=v.parent;if(b.schema.getBlockElements()[s.name]&&b.settings.pagebreak_split_block){s.type=3,s.value=q,s.raw=!0,v.remove();continue}v.type=3,v.value=q,v.raw=!0}}})})}),function(){}}),o("0")()}();