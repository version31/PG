!function(){var j={},i=function(a){for(var v=j[a],u=v.deps,t=v.defn,s=u.length,r=new Array(s),q=0;q<s;++q){r[q]=o(u[q])}var d=t.apply(null,r);if(void 0===d){throw"module ["+a+"] returned undefined"}v.instance=d},p=function(a,f,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===f){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}j[a]={deps:f,defn:e,instance:void 0}},o=function(b){var a=j[b];if(void 0===a){throw"module ["+b+"] was undefined"}return void 0===a.instance&&i(b),a.instance},n=function(g,d){for(var r=g.length,q=new Array(r),h=0;h<r;++h){q.push(o(g[h]))}d.apply(null,d)},m={};m.bolt={module:{api:{define:p,require:n,demand:o}}};var l=p,k=function(d,c){l(d,[],function(){return c})};k("7",tinymce.util.Tools.resolve),l("1",["7"],function(b){return b("tinymce.PluginManager")}),l("2",["7"],function(b){return b("tinymce.util.Delay")}),l("3",["7"],function(b){return b("tinymce.util.VK")}),l("8",["7"],function(b){return b("tinymce.dom.TreeWalker")}),l("9",["7"],function(b){return b("tinymce.util.Tools")}),l("a",[],function(){var g=function(b){return b.sort(function(d,c){return d.start.length>c.start.length?-1:d.start.length<c.start.length?1:0})},f=function(e,d){for(var s=0;s<e.length;s++){if(0===d.indexOf(e[s].start)&&(!e[s].end||d.lastIndexOf(e[s].end)===d.length-e[s].end.length)){return e[s]}}},r=function(t,s,w,v){var u=s.substr(w-t.end.length-v,t.end.length);return u===t.end},q=function(e,d,s){return e-d-s.end.length-s.start.length>0},h=function(a,v,u,t){var s,d,c=g(a);for(d=0;d<c.length;d++){if(s=c[d],void 0!==s.end&&r(s,v,u,t)&&q(u,t,s)){return s}}};return{findPattern:f,findEndPattern:h}}),l("4",["8","9","a"],function(h,g,t){var s=function(u,f,x,w,v){return u=w>0?u.splitText(w):u,u.splitText(x-w-v),u.deleteData(0,f.start.length),u.deleteData(u.data.length-f.end.length,f.end.length),u},r=function(F,E,D){var C,B,A,z,y,x,w,v,u,d,c;if(C=F.selection,B=F.dom,C.isCollapsed()&&(A=C.getRng(!0),z=A.startContainer,y=A.startOffset,w=z.data,d=D===!0?1:0,3==z.nodeType&&(u=t.findEndPattern(E,w,y,d),void 0!==u&&(x=Math.max(0,y-d),x=w.lastIndexOf(u.start,x-u.end.length-1),x!==-1&&(v=B.createRng(),v.setStart(z,x),v.setEnd(z,y-d),u=t.findPattern(E,v.toString()),u&&u.end&&!(z.data.length<=u.start.length+u.end.length)))))){return c=F.formatter.get(u.format),c&&c[0].inline?(F.undoManager.transact(function(){z=s(z,u,y,x,d),F.formatter.apply(u.format,{},z)}),z):void 0}},q=function(D,C){var B,A,z,y,x,w,v,u,c,b,a;if(B=D.selection,A=D.dom,B.isCollapsed()&&(v=A.getParent(B.getStart(),"p"))){for(c=new h(v,v);x=c.next();){if(3==x.nodeType){y=x;break}}if(y){if(u=t.findPattern(C,y.data),!u){return}if(b=B.getRng(!0),z=b.startContainer,a=b.startOffset,y==z&&(a=Math.max(0,a-u.start.length)),g.trim(y.data).length==u.start.length){return}u.format&&(w=D.formatter.get(u.format),w&&w[0].block&&(y.deleteData(0,u.start.length),D.formatter.apply(u.format,{},y),b.setStart(z,a),b.collapse(!0),B.setRng(b))),u.cmd&&D.undoManager.transact(function(){y.deleteData(0,u.start.length),D.execCommand(u.cmd)})}}};return{applyInlineFormat:r,applyBlockFormat:q}}),l("5",["3","4"],function(q,h){function v(b,w){var g,f;f=h.applyInlineFormat(b,w,!1),f&&(g=b.dom.createRng(),g.setStart(f,f.data.length),g.setEnd(f,f.data.length),b.selection.setRng(g)),h.applyBlockFormat(b,w)}function u(b,B){var A,z,y,x,w;A=h.applyInlineFormat(b,B,!0),A&&(w=b.dom,z=A.data.slice(-1),/[\u00a0 ]/.test(z)&&(A.deleteData(A.data.length-1,1),y=w.doc.createTextNode(z),A.nextSibling?w.insertAfter(y,A.nextSibling):A.parentNode.appendChild(y),x=w.createRng(),x.setStart(y,1),x.setEnd(y,1),b.selection.setRng(x)))}var t=function(f,e,w){for(var g=0;g<f.length;g++){if(w(f[g],e)){return !0}}},s=function(a,d){return t(a,d,function(e,f){return e===f.keyCode&&q.modifierPressed(f)===!1})},r=function(d,c){return t(d,c,function(f,e){return f.charCodeAt(0)===e.charCode})};return{handleEnter:v,handleInlineKey:u,checkCharCode:r,checkKeyCode:s}}),l("6",[],function(){var d=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],c=function(a){return void 0!==a.textpattern_patterns?a.textpattern_patterns:d};return{getPatterns:c}}),l("0",["1","2","3","4","5","6"],function(h,g,t,s,r,q){return h.add("textpattern",function(b){var f=q.getPatterns(b.settings),e=[",",".",";",":","!","?"],c=[32];b.on("keydown",function(a){13!==a.keyCode||t.modifierPressed(a)||r.handleEnter(b,f)},!0),b.on("keyup",function(a){r.checkKeyCode(c,a)&&r.handleInlineKey(b,f)}),b.on("keypress",function(a){r.checkCharCode(e,a)&&g.setEditorTimeout(b,function(){r.handleInlineKey(b,f)})}),this.setPatterns=function(d){f=d},this.getPatterns=function(){return f}}),function(){}}),o("0")()}();